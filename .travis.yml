language: go
go:
- 1.8
env:
  global:
  - GH_REF: github.com/icyleaf/icyleaf.com
  - HOST: icyleaf.com
  - secure: p71lsUS+Yvmy575Ejpxt34yY3qcGmppogfkI+shuYijakMAzKK3ZI5/6pra/04BiUvhXieVYMrIwUUgvueUaLnL1SkLLBpQcvsQW7SlMIYywyn2vxYDYowTkvYFmp+/p1ZiUpAVyVgcS/k9Yvw45zudKbWuNeZwDvQ2voIj14fQ7cGbQdlrhQsaMfOU63yfr1doclXwCVgLI0YSi7s5w9R5Lf8ALyUSOHFVoGpWV+ycNEDOnVXdoxow/JwxwrTef89jfZwk1SUQcGVzi0kzRB9IBQHzn1VOrEJX+CR5cehH3CKyNWKK6MDrPlYfmjiAZRsi73v7DoCKtKdDm9ITIPhc2gHlswZlccs5CPMkGR57r/f13bYsRo1WGGdhoi3HlYUHrWiVSNkzbhZUCTGfOyPd+6VfZlBkeC8uqK00NTdBSacxXRqs4qrbbxCnAJdYe+7RZS/GVkPNh/KQLO88+0NOW2qxFK9O+bJaymm0HQ+W2Jsed3+jhxN5kHA5T3Iz1Ze4Qe09iaDnRFYaoR4tA8T5wK6pHxzK5/XXjWQnI9tPqx0KRCOHzTXBPIMN4nNwSa8UuAcZSWY8dG6qShrbuYKN3M3J9q1fdXCiYnTzf/mDkDyOi/HrNIT2W/kl/HZ40Zb/tNNjtEjOtbfhoFEeBb2K59y8T8Zb/BCOdsAzyKNw=
install:
- go get github.com/kardianos/govendor
- govendor get github.com/spf13/hugo
script:
- hugo --verbose
- cd public
- git init
- git config --global user.name "travis"
- git config --global user.email "icyleaf.cn@gmail.com"
- git remote add github "https://${GH_TOKEN}@${GH_REF}.git"
- git fetch github
- git reset github/gh-pages
- echo "${HOST}" > CNAME
- git add -A
- git commit --allow-empty -m 'Deploy from travis-ci.org'
- git push github HEAD:gh-pages
